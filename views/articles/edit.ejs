<%- include ../partials/header %>
<h1>EDIT <%= article.title %> </h1>
  <form action="/subs/<%= sub._id %>/articles/<%= article._id %>?_method=PUT" method="POST">
    <div class="form-group">
      <label for="article[title]">Title</label>
      <input type="text" name="article[title]" value="<%= article.title %>">
    </div>
    <div class="form-group">
      <label for="article[text]">Text</label>
      <input type="hidden" name="article[text]">
      <div id="editor">
      </div>
    </div>
    <div class="form-group article-input">
      <input class="btn btn-primary" type="submit" name="Submit" value="Update">
    </div>
  </form>

<%- include ../partials/footer %>

<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<!-- Initialize Quill editor -->
<script>
let quill = new Quill('#editor', {
  modules: {toolbar: true},
  theme: 'snow'
});

let form = document.querySelector('form');
form.onsubmit = function() {
// Populate hidden form on submit
let about = document.querySelector('input[name="article[text]"]');
about.value = JSON.stringify(quill.getContents());
};

</script>
